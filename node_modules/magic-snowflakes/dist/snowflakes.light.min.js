/*! Snowflakes | Â© 2021 Denis Seleznev | MIT License | https://github.com/hcodes/snowflakes/ */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).Snowflakes=t()}(this,function(){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function e(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}var a="";function r(n,i){Object.keys(i).forEach(function(e){var t=e;a&&-1<e.search("animation")&&(t=a+e[0].toUpperCase()+e.substr(1)),n.style[t]=i[e]})}function n(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function l(e,t){e.classList.add(t)}function f(e,t){return e+Math.floor(Math.random()*(t-e))}function c(e,t,n,i,a){return i+(a-i)*(e-t)/(n-t)}"undefined"!=typeof window&&(a=-1<Array.prototype.slice.call(window.getComputedStyle(document.documentElement,"")).join(",").search(/,animation/)?"":"Webkit");var t,o,m,_=function(){function o(e){s(this,o);var t=e.minSize===e.maxSize;this.innerSize=t?0:f(0,o.maxInnerSize),this.size=o.calcSize(this.innerSize,e);var n=document.createElement("div"),i=document.createElement("div"),a=this.getAnimationProps(e),a={animationName:"snowflake_gid_".concat(e.gid,"_y"),animationDelay:a.animationDelay,animationDuration:a.animationDuration,left:99*Math.random()+"%",top:-Math.sqrt(2)*this.size+"px",width:this.size+"px",height:this.size+"px"};t||(a.opacity=c(this.size,e.minSize,e.maxSize,e.minOpacity,e.maxOpacity)),r(n,a),r(i,{animationName:"snowflake_gid_".concat(e.gid,"_x_").concat(this.innerSize),animationDelay:4*Math.random()+"s"}),l(n,"snowflake"),l(i,"snowflake__inner"),e.types&&l(i,"snowflake__inner_type_"+f(0,e.types)),e.wind&&l(i,"snowflake__inner_wind"),e.rotation&&l(i,"snowflake__inner_rotation"+(.5<Math.random()?"":"_reverse")),n.appendChild(i),this._elem=n}return e(o,[{key:"getAnimationProps",value:function(e){var t=e.containerHeight/50/e.speed,n=t/3;return{animationDelay:Math.random()*t+"s",animationDuration:c(this.size,e.minSize,e.maxSize,t,n)+"s"}}},{key:"resize",value:function(e){e=this.getAnimationProps(e);r(this._elem,e)}},{key:"appendTo",value:function(e){e.appendChild(this._elem)}},{key:"destroy",value:function(){delete this._elem}}],[{key:"calcSize",value:function(e,t){return Math.floor(c(e,0,o.maxInnerSize,t.minSize,t.maxSize))}}]),o}();m=20,(o="maxInnerSize")in(t=_)?Object.defineProperty(t,o,{value:m,enumerable:!0,configurable:!0,writable:!0}):t[o]=m;var d=function(){function t(e){s(this,t),this.params=this._setParams(e),this._isBody=this.params.container===document.body,this._setGid(),this._container=this._appendContainer(),this.params.stop&&this.stop(),this._appendStyles(),this._appendFlakes(),this._handleResize=this._handleResize.bind(this),window.addEventListener("resize",this._handleResize,!1)}return e(t,[{key:"destroy",value:function(){this._removeStyles(),n(this._container),delete this._container,this._flakes.forEach(function(e){return e.destroy()}),delete this._flakes,delete this.params,window.removeEventListener("resize",this._handleResize,!1)}},{key:"start",value:function(){var e,t;e=this._container,t="snowflakes_paused",e.classList.remove(t)}},{key:"stop",value:function(){l(this._container,"snowflakes_paused")}},{key:"_setGid",value:function(){t._gid=t._gid||0,t._gid++,this._gid=t._gid}},{key:"_handleResize",value:function(){var t=this._getFlakeParams();r(this._container,{display:"none"}),this._flakes.forEach(function(e){return e.resize(t)}),this._updateAnimationStyle(),r(this._container,{display:"block"})}},{key:"_appendContainer",value:function(){var e=document.createElement("div");return l(e,"snowflakes"),l(e,"snowflakes_gid_".concat(this._gid)),this._isBody&&l(e,"snowflakes_body"),r(e,{zIndex:this.params.zIndex}),this.params.container.appendChild(e),e}},{key:"_appendStyles",value:function(){(t._count=t._count||0)||(this._mainStyleNode=this._injectStyle('.snowflake{position:absolute;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;-webkit-animation:snowflake_unknown 10s linear infinite;animation:snowflake_unknown 10s linear infinite;will-change:transform}.snowflake__inner,.snowflake__inner:before{position:absolute;top:0;right:0;bottom:0;left:0}.snowflake__inner:before{content:"";background-size:100% 100%}.snowflake__inner_wind{-webkit-animation:snowflake_unknown 2s ease-in-out infinite alternate;animation:snowflake_unknown 2s ease-in-out infinite alternate}.snowflake__inner_rotation:before{-webkit-animation:snowflake_rotation 10s linear infinite;animation:snowflake_rotation 10s linear infinite}.snowflake__inner_rotation_reverse:before{-webkit-animation:snowflake_rotation_reverse 10s linear infinite;animation:snowflake_rotation_reverse 10s linear infinite}.snowflakes{pointer-events:none}.snowflakes_paused .snowflake,.snowflakes_paused .snowflake__inner,.snowflakes_paused .snowflake__inner:before{-webkit-animation-play-state:paused;animation-play-state:paused}.snowflakes_body{position:fixed;top:0;left:0;width:100%;height:1px}@-webkit-keyframes snowflake_rotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes snowflake_rotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes snowflake_rotation_reverse{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(-1turn);transform:rotate(-1turn)}}@keyframes snowflake_rotation_reverse{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(-1turn);transform:rotate(-1turn)}}')),t._count++,this._imagesStyleNode=this._injectStyle("".replace(/\{color\}/g,encodeURIComponent(this.params.color))),this._animationStyleNode=this._injectStyle(this._getAnimationStyle())}},{key:"_injectStyle",value:function(e,t){return e=e.replace(/_gid_value/g,"_gid_".concat(this._gid)),(t=t)||(t=document.createElement("style"),document.body.appendChild(t)),t.styleSheet?t.styleSheet.cssText=e:"textContent"in t?t.textContent=e:t.innerHTML=e,t}},{key:"_getFlakeParams",value:function(){var e=this._height(),t=this.params;return{containerHeight:e,gid:this._gid,count:t.count,speed:t.speed,rotation:t.rotation,minOpacity:t.minOpacity,maxOpacity:t.maxOpacity,minSize:t.minSize,maxSize:t.maxSize,types:t.types,wind:t.wind}}},{key:"_appendFlakes",value:function(){var t=this,e=this._getFlakeParams();this._flakes=[];for(var n=0;n<this.params.count;n++)this._flakes.push(new _(e));this._flakes.sort(function(e,t){return e.size-t.size}).forEach(function(e){e.appendTo(t._container)})}},{key:"_setParams",value:function(n){n=n||{};var i={};return[["color","#5ECDEF"],["container",document.body],["count",50],["speed",1],["stop",!1],["rotation",!0],["minOpacity",.6],["maxOpacity",1],["minSize",10],["maxSize",25],["types",6],["width"],["height"],["wind",!0],["zIndex",9999]].forEach(function(e){var t=e[0],e=e[1];i[t]="boolean"==typeof e?t in n?n[t]:e:n[t]||e}),i}},{key:"_getAnimationStyle",value:function(){for(var e=this._height()+this.params.maxSize*Math.sqrt(2)+"px",t=this._gid,n="@-webkit-keyframes snowflake_gid_".concat(t,"_y{from{-webkit-transform:translateY(").concat("0px",")}to{-webkit-transform:translateY(").concat(e,");}}\n@keyframes snowflake_gid_").concat(t,"_y{from{transform:translateY(").concat("0px",")}to{transform:translateY(").concat(e,")}}"),i=0;i<=_.maxInnerSize;i++){var a=_.calcSize(i,this.params)+"px";n+="@-webkit-keyframes snowflake_gid_".concat(t,"_x_").concat(i,"{from{-webkit-transform:translateX(0px)}to{-webkit-transform:translateX(").concat(a,");}}\n@keyframes snowflake_gid_").concat(t,"_x_").concat(i,"{from{transform:translateX(0px)}to{transform:translateX(").concat(a,")}}")}return n}},{key:"_updateAnimationStyle",value:function(){this._injectStyle(this._getAnimationStyle(),this._animationStyleNode)}},{key:"_removeStyles",value:function(){!--t._count<1&&(n(this._mainStyleNode),delete this._mainStyleNode),n(this._imagesStyleNode),delete this._imagesStyleNode,n(this._animationStyleNode),delete this._animationStyleNode}},{key:"_height",value:function(){return this.params.height||(this._isBody?(t=document.body,n=document.documentElement,window.innerHeight?e=window.innerHeight:n&&n.clientHeight?e=n.clientHeight:t&&(e=t.clientHeight),e):this.params.container.offsetHeight+this.params.maxSize);var e,t,n}}]),t}();return function(e){return new d(e)}});